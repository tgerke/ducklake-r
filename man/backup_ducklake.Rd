% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/backup_ducklake.R
\name{backup_ducklake}
\alias{backup_ducklake}
\title{Create a complete DuckLake backup}
\usage{
backup_ducklake(ducklake_name, lake_path, backup_path)
}
\arguments{
\item{ducklake_name}{Name of the attached DuckLake}

\item{lake_path}{Path to the DuckLake directory containing the catalog file}

\item{backup_path}{Directory where backups should be stored. A timestamped
subdirectory will be created within this path.}
}
\value{
Invisibly returns the path to the created backup directory
}
\description{
Creates a timestamped backup of both the catalog database and data files.
The backup includes the complete state of the DuckLake at the time of backup,
allowing for point-in-time recovery.
}
\details{
The function creates a complete backup by:
\enumerate{
\item Creating a timestamped backup directory
\item Copying the catalog database file (.ducklake)
\item Copying all data files from the main/ directory
}

\strong{Important notes:}
\itemize{
\item Transactions committed after a backup won't be tracked when recovering.
The data will exist in the Parquet files, but the backup will point to
an earlier snapshot.
\item Consider coordinating backups with maintenance operations (compaction
and cleanup) for optimal storage efficiency.
\item For production systems, schedule backups using \code{{cronR}} or
\code{{taskscheduleR}}.
}
}
\examples{
\dontrun{
# Create a DuckLake
lake_dir <- tempfile("my_lake")
dir.create(lake_dir)
attach_ducklake("my_lake", lake_path = lake_dir)

# Add some data
with_transaction(
  create_table(mtcars, "cars"),
  author = "User",
  commit_message = "Initial data"
)

# Create a backup
backup_dir <- backup_ducklake(
  ducklake_name = "my_lake",
  lake_path = lake_dir,
  backup_path = file.path(lake_dir, "backups")
)

# To restore from backup:
# detach_ducklake("my_lake")
# attach_ducklake("my_lake", lake_path = backup_dir)
}
}
