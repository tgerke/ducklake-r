% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/time_travel.R
\name{get_ducklake_table_asof}
\alias{get_ducklake_table_asof}
\title{Query a table at a specific timestamp (time travel)}
\usage{
get_ducklake_table_asof(table_name, timestamp, conn = NULL)
}
\arguments{
\item{table_name}{The name of the table to query}

\item{timestamp}{A POSIXct timestamp or character string in ISO 8601 format (e.g., "2024-01-15 10:30:00")}

\item{conn}{Optional DuckDB connection object. If not provided, uses the default ducklake connection.}
}
\value{
A dplyr lazy query object (tbl_lazy) that can be further manipulated with dplyr verbs
}
\description{
Retrieves data from a DuckLake table as it existed at a specific point in time
using DuckLake's AT (TIMESTAMP => ...) syntax.
}
\details{
DuckLake supports time-travel queries, allowing you to query historical data
as it existed at a specific timestamp. This uses the syntax:
\code{SELECT * FROM table AT (TIMESTAMP => 'timestamp')}

This is useful for:
\itemize{
\item Auditing changes over time
\item Recovering accidentally deleted or modified data
\item Comparing data states across different time points
\item Regulatory compliance and data lineage documentation
}

The timestamp must be within the range of available snapshots for the table.
Use \code{list_table_snapshots()} to see available snapshot times.
}
\examples{
\dontrun{
# Query data as it existed yesterday
yesterday <- Sys.time() - (24 * 60 * 60)
get_ducklake_table_asof("my_table", yesterday) |>
  filter(category == "A") |>
  collect()

# Query data at a specific snapshot time
snapshots <- list_table_snapshots("my_table")
get_ducklake_table_asof("my_table", snapshots$snapshot_time[2]) |>
  summarise(total = sum(amount))
}
}
